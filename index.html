<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b0b0b" />
  <title>Mirror OS ‚Ä¢ Family Christmas Tree</title>
  <link rel="manifest" href="./manifest.json" />
  <!-- ‚úÖ your repo file is styles.css (not style.css) -->
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <canvas id="tree"></canvas>

  <!-- ‚úÖ Option B: carols -->
  <audio id="carol" preload="auto"></audio>

  <!-- ‚úÖ GPT Voice playback (keeps one audio element for clean control) -->
  <audio id="tts" preload="none"></audio>

  <div class="ui">
    <div class="top">
      <div class="brand">
        <div class="badge">üéÑ</div>
        <div class="titles">
          <div class="kicker">MIRROR OS</div>
          <h1>Family Christmas Tree</h1>
        </div>
      </div>

      <div class="now">
        <div class="name" id="currentName">‚Äî</div>
        <div class="line" id="currentLine">‚Äî</div>
      </div>
    </div>

    <div class="card">
      <div class="row">
        <button class="btn primary" id="btnPlay">‚è∏ Pause</button>
        <button class="btn" id="btnNext">‚è≠ Next</button>
        <button class="btn" id="btnShuffle">üîÄ Shuffle: On</button>
        <button class="btn" id="btnVoice">üîä Voice: Off</button>

        <!-- ‚úÖ Music toggle -->
        <button class="btn" id="btnMusic">üéµ Music: Off</button>

        <button class="btn" id="btnCinematic">üé¨ Cinematic: Off</button>
      </div>

      <!-- ‚úÖ NEW: Voice controls (GPT vs Browser + voice choice + test) -->
      <div class="row" style="margin-top:12px">
        <label class="field">
          <span>Voice engine</span>
          <select id="voiceEngine">
            <option value="gpt" selected>GPT Voice (OpenAI)</option>
            <option value="browser">Browser Voice (offline)</option>
          </select>
        </label>

        <label class="field">
          <span>GPT voice</span>
          <select id="voiceSelect">
            <option value="alloy" selected>Alloy</option>
            <option value="marin">Marin</option>
            <option value="cedar">Cedar</option>
            <option value="ember">Ember</option>
          </select>
        </label>

        <button class="btn" id="btnTestVoice" title="Plays a short sample">
          üéôÔ∏è Test
        </button>
      </div>

      <div class="row" style="margin-top:12px">
        <label class="field">
          <span>Tree style</span>
          <select id="treeStyle">
            <option value="gold" selected>Golden Spiral</option>
            <option value="lights">Lights</option>
          </select>
        </label>

        <label class="field">
          <span>Switch speed (name change)</span>
          <select id="speed">
            <option value="slow">Slow</option>
            <option value="normal" selected>Normal</option>
            <option value="fast">Fast</option>
          </select>
        </label>

        <label class="field">
          <span>Brightness</span>
          <input id="brightness" type="range" min="0.35" max="1.35" step="0.01" value="1.00" />
        </label>
      </div>

      <div class="row" style="margin-top:12px">
        <label class="field">
          <span>Text flow speed</span>
          <input id="textSpeed" type="range" min="0" max="100" step="1" value="35" />
        </label>

        <label class="field">
          <span>Font size</span>
          <input id="fontSize" type="range" min="14" max="34" step="1" value="18" />
        </label>

        <label class="field">
          <span>Color mode</span>
          <select id="colorMode">
            <option value="single">Single</option>
            <option value="palette" selected>Palette</option>
            <option value="random">Random</option>
          </select>
        </label>
      </div>

      <div class="row" style="margin-top:12px">
        <label class="field">
          <span>Text shape</span>
          <select id="textShape">
            <option value="tree" selected>Tree Spiral</option>
            <option value="circle">Circle</option>
            <option value="heart">Heart</option>
            <option value="wave">Wave</option>
            <option value="pillar">Pillar</option>
            <option value="star">Star</option>
          </select>
        </label>

        <label class="field">
          <span>Text container</span>
          <select id="textContainer">
            <option value="none">None</option>
            <option value="ball" selected>Ball</option>
            <option value="pill">Pill</option>
            <option value="badge">Badge</option>
          </select>
        </label>
      </div>

      <details class="edit">
        <summary>‚ñ∂ Edit family & words</summary>
        <div class="hint">Config preview (debug)</div>
        <pre class="preview" id="configPreview">{}</pre>
      </details>
    </div>

    <div class="foot">
      <div class="tiny">
        Tip: (Always-on mode) UI doesn‚Äôt hide and cinematic is disabled ‚Ä¢
        <strong>Music:</strong> click üéµ ‚Ä¢ <strong>Next song:</strong> Shift+N
      </div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>

  <!-- ‚úÖ Tiny glue: voice test button triggers your app.js speak() via click unlock -->
  <script type="module">
    // This just sends a custom event that app.js can listen for safely
    const btn = document.getElementById("btnTestVoice");
    btn?.addEventListener("click", () => {
      window.dispatchEvent(new CustomEvent("mirror:test-voice"));
    });
  </script>
</body>
</html>
